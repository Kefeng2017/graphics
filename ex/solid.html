<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    

    <script>
    this.draw = function () {
        //第一种方法——dda算法
        var pax = this.spoint.px;
        var pay = this.spoint.py;
        var pbx = this.epoint.px;
        var pby = this.epoint.py;
        var dx = pbx-pax;
        var dy = pby-pay;
        var k = dy / dx ;
        var x = pax;
        var y = pay;
        var eps;
        if(Math.abs(dx) > Math.abs(dy)){
            eps = Math.abs(dx);
        }else {
            eps = Math.abs(dy);
        }
        var xlincre = dx*1.0 / eps;
        var ylincre = dy * 1.0 / eps;
        for(var i = 0 ; i <= eps ; i++){
            new Point(parseInt(x+0.5) , parseInt(y+0.5)).draw();//画点
        
                x += xlincre;
                y += ylincre;
        
        }

        //第二种方法中点画线
        dx = Math.abs(dx);
        dy = Math.abs(dy);
        var e ;
        if(dx >= dy){
            e = -dx;
        }else {
            console.log(1);
            e = -dy;
        }
        var steps = dx>dy?dx:dy;
        for( var i = 0; i <= steps; i++){
            new Point(x , y).draw();//画点
            if( (k >= 0 && k <= 1) || (k <= 0 && k >= -1)){
                if(pbx >= pax ){
                        x++;
                    }else {
                        x--;
                    }
                e += 2*dy;
                if(e >= 0){
                    if(pby >pay){
                            y++;
                        }else {
                            y--;
                        }
                    e -= 2*dx;
                }
            }else if ( k >1 || k < -1){
                if(pby >pay){
                    y++;
                }else {
                    y--;
                }
                e += 2*dx;
                if(e >= 0){
                    if(pbx >= pax ){
                        x++;
                    }else {
                        x--;
                    }
                    e -= 2*dy;
                }
            }
        }


        //bresenham
        dx = Math.abs(dx);
        dy = Math.abs(dy);
        var d  ;
        var d1 ;
        var d2 ;
        var steps = dx>dy?dx:dy;
        if( (k >= 0 && k <= 1) || (k <= 0 && k >= -1)){
            d = 2*dy - dx ;
            d1 = 2*(dy - dx);
            d2 = 2*dy ;

            for(var i = 0; i < steps ;i++){
                new Point(x , y).draw();//画点
                if(pbx >= pax ){
                    x++;
                }else {
                    console.log(123);
                    x--;
                }

                if(d < 0){
                    d += d2;
                }else {
                    if(pby >pay){

                        y++;
                    }else {
                        y--;
                    }

                    d += d1;
                }
            }
        }else if( k >1 || k < -1){
            d = 2*dx - dy ;
            d1 = 2*(dx - dy);
            d2 = 2*dx ;
            for(var i = 0; i < steps ;i++){
                new Point(x , y).draw();//画点
                if(pby >pay){
                    y++;
                }else {
                    y--;
                }
                if(d < 0){
                    d += d2;
                }else {
                    if(pbx >= pax ){
                        x++;
                    }else {
                        x--;
                    }
                    d += d1;
                }
            }
        }
    }
    </script>

</body>
</html>